/**
 * Minified by jsDelivr using UglifyJS v3.4.4.
 * Original file: /npm/parchment@1.1.4/dist/parchment.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Parchment=e():t.Parchment=e()}("undefined"!=typeof self?self:this,function(){return function(o){var n={};function r(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return o[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=o,r.c=n,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=9)}([function(t,n,e){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(n,"__esModule",{value:!0});var a=function(o){function t(t){var e=this;return t="[Parchment] "+t,(e=o.call(this,t)||this).message=t,e.name=e.constructor.name,e}return i(t,o),t}(Error);n.ParchmentError=a;var s,o,u={},c={},l={},p={};function f(t,e){var o;if(void 0===e&&(e=s.ANY),"string"==typeof t)o=p[t]||u[t];else if(t instanceof Text||t.nodeType===Node.TEXT_NODE)o=p.text;else if("number"==typeof t)t&s.LEVEL&s.BLOCK?o=p.block:t&s.LEVEL&s.INLINE&&(o=p.inline);else if(t instanceof HTMLElement){var n=(t.getAttribute("class")||"").split(/\s+/);for(var r in n)if(o=c[n[r]])break;o=o||l[t.tagName]}return null==o?null:e&s.LEVEL&o.scope&&e&s.TYPE&o.scope?o:null}n.DATA_KEY="__blot",(o=s=n.Scope||(n.Scope={}))[o.TYPE=3]="TYPE",o[o.LEVEL=12]="LEVEL",o[o.ATTRIBUTE=13]="ATTRIBUTE",o[o.BLOT=14]="BLOT",o[o.INLINE=7]="INLINE",o[o.BLOCK=11]="BLOCK",o[o.BLOCK_BLOT=10]="BLOCK_BLOT",o[o.INLINE_BLOT=6]="INLINE_BLOT",o[o.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",o[o.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",o[o.ANY=15]="ANY",n.create=function(t,e){var o=f(t);if(null==o)throw new a("Unable to create "+t+" blot");var n=o;return new n(t instanceof Node||t.nodeType===Node.TEXT_NODE?t:n.create(e),e)},n.find=function t(e,o){return void 0===o&&(o=!1),null==e?null:null!=e[n.DATA_KEY]?e[n.DATA_KEY].blot:o?t(e.parentNode,o):null},n.query=f,n.register=function e(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];if(1<t.length)return t.map(function(t){return e(t)});var n=t[0];if("string"!=typeof n.blotName&&"string"!=typeof n.attrName)throw new a("Invalid definition");if("abstract"===n.blotName)throw new a("Cannot register abstract class");"string"==typeof(p[n.blotName||n.attrName]=n).keyName?u[n.keyName]=n:(null!=n.className&&(c[n.className]=n),null!=n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(function(t){return t.toUpperCase()}):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(function(t){null!=l[t]&&null!=n.className||(l[t]=n)})));return n}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(0),n=function(){function t(t,e,o){void 0===o&&(o={}),this.attrName=t,this.keyName=e;var n=r.Scope.TYPE&r.Scope.ATTRIBUTE;null!=o.scope?this.scope=o.scope&r.Scope.LEVEL|n:this.scope=r.Scope.ATTRIBUTE,null!=o.whitelist&&(this.whitelist=o.whitelist)}return t.keys=function(t){return[].map.call(t.attributes,function(t){return t.name})},t.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)},t.prototype.canAdd=function(t,e){return null!=r.query(t,r.Scope.BLOT&(this.scope|r.Scope.TYPE))&&(null==this.whitelist||("string"==typeof e?-1<this.whitelist.indexOf(e.replace(/["']/g,"")):-1<this.whitelist.indexOf(e)))},t.prototype.remove=function(t){t.removeAttribute(this.keyName)},t.prototype.value=function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""},t}();e.default=n},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(11),a=o(5),s=o(0),u=function(o){function a(t){var e=o.call(this,t)||this;return e.build(),e}return r(a,o),a.prototype.appendChild=function(t){this.insertBefore(t)},a.prototype.attach=function(){o.prototype.attach.call(this),this.children.forEach(function(t){t.attach()})},a.prototype.build=function(){var o=this;this.children=new i.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(t){try{var e=c(t);o.insertBefore(e,o.children.head||void 0)}catch(t){if(t instanceof s.ParchmentError)return;throw t}})},a.prototype.deleteAt=function(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,function(t,e,o){t.deleteAt(e,o)})},a.prototype.descendant=function(t,e){var o=this.children.find(e),n=o[0],r=o[1];return null==t.blotName&&t(n)||null!=t.blotName&&n instanceof t?[n,r]:n instanceof a?n.descendant(t,r):[null,-1]},a.prototype.descendants=function(n,t,e){void 0===t&&(t=0),void 0===e&&(e=Number.MAX_VALUE);var r=[],i=e;return this.children.forEachAt(t,e,function(t,e,o){(null==n.blotName&&n(t)||null!=n.blotName&&t instanceof n)&&r.push(t),t instanceof a&&(r=r.concat(t.descendants(n,e,i))),i-=o}),r},a.prototype.detach=function(){this.children.forEach(function(t){t.detach()}),o.prototype.detach.call(this)},a.prototype.formatAt=function(t,e,n,r){this.children.forEachAt(t,e,function(t,e,o){t.formatAt(e,o,n,r)})},a.prototype.insertAt=function(t,e,o){var n=this.children.find(t),r=n[0],i=n[1];if(r)r.insertAt(i,e,o);else{var a=null==o?s.create("text",e):s.create(e,o);this.appendChild(a)}},a.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(t){return e instanceof t}))throw new s.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},a.prototype.length=function(){return this.children.reduce(function(t,e){return t+e.length()},0)},a.prototype.moveChildren=function(e,o){this.children.forEach(function(t){e.insertBefore(t,o)})},a.prototype.optimize=function(t){if(o.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var e=s.create(this.statics.defaultChild);this.appendChild(e),e.optimize(t)}else this.remove()},a.prototype.path=function(t,e){void 0===e&&(e=!1);var o=this.children.find(t,e),n=o[0],r=o[1],i=[[this,t]];return n instanceof a?i.concat(n.path(r,e)):(null!=n&&i.push([n,r]),i)},a.prototype.removeChild=function(t){this.children.remove(t)},a.prototype.replace=function(t){t instanceof a&&t.moveChildren(this),o.prototype.replace.call(this,t)},a.prototype.split=function(t,n){if(void 0===n&&(n=!1),!n){if(0===t)return this;if(t===this.length())return this.next}var r=this.clone();return this.parent.insertBefore(r,this.next),this.children.forEachAt(t,this.length(),function(t,e,o){t=t.split(e,n),r.appendChild(t)}),r},a.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},a.prototype.update=function(t,e){var n=this,o=[],r=[];t.forEach(function(t){t.target===n.domNode&&"childList"===t.type&&(o.push.apply(o,t.addedNodes),r.push.apply(r,t.removedNodes))}),r.forEach(function(t){if(!(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var e=s.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==n.domNode||e.detach())}}),o.filter(function(t){return t.parentNode==n.domNode}).sort(function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(t){var e=null;null!=t.nextSibling&&(e=s.find(t.nextSibling));var o=c(t);o.next==e&&null!=o.next||(null!=o.parent&&o.parent.removeChild(n),n.insertBefore(o,e||void 0))})},a}(a.default);function c(e){var o=s.find(e);if(null==o)try{o=s.create(e)}catch(t){o=s.create(s.Scope.INLINE),[].slice.call(e.childNodes).forEach(function(t){o.domNode.appendChild(t)}),e.parentNode&&e.parentNode.replaceChild(o.domNode,e),o.attach()}return o}e.default=u},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var a=o(1),s=o(6),r=o(2),u=o(0),c=function(n){function r(t){var e=n.call(this,t)||this;return e.attributes=new s.default(e.domNode),e}return i(r,n),r.formats=function(t){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)},r.prototype.format=function(t,e){var o=u.query(t);o instanceof a.default?this.attributes.attribute(o,e):e&&(null==o||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e))},r.prototype.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode);return null!=e&&(t[this.statics.blotName]=e),t},r.prototype.replaceWith=function(t,e){var o=n.prototype.replaceWith.call(this,t,e);return this.attributes.copy(o),o},r.prototype.update=function(t,e){var o=this;n.prototype.update.call(this,t,e),t.some(function(t){return t.target===o.domNode&&"attributes"===t.type})&&this.attributes.build()},r.prototype.wrap=function(t,e){var o=n.prototype.wrap.call(this,t,e);return o instanceof r&&o.statics.scope===this.statics.scope&&this.attributes.move(o),o},r}(r.default);e.default=c},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(5),a=o(0),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.value=function(t){return!0},e.prototype.index=function(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1},e.prototype.position=function(t,e){var o=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return 0<t&&(o+=1),[this.parent.domNode,o]},e.prototype.value=function(){return(t={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,t;var t},e.scope=a.Scope.INLINE_BLOT,e}(i.default);e.default=s},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(0),n=function(){function t(t){this.domNode=t,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(t.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),t.create=function(t){if(null==this.tagName)throw new a.ParchmentError("Blot definition missing tagName");var e;return Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t).toString()===t&&(t=parseInt(t))),e="number"==typeof t?document.createElement(this.tagName[t-1]):-1<this.tagName.indexOf(t)?document.createElement(t):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e},t.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},t.prototype.clone=function(){var t=this.domNode.cloneNode(!1);return a.create(t)},t.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},t.prototype.deleteAt=function(t,e){this.isolate(t,e).remove()},t.prototype.formatAt=function(t,e,o,n){var r=this.isolate(t,e);if(null!=a.query(o,a.Scope.BLOT)&&n)r.wrap(o,n);else if(null!=a.query(o,a.Scope.ATTRIBUTE)){var i=a.create(this.statics.scope);r.wrap(i),i.format(o,n)}},t.prototype.insertAt=function(t,e,o){var n=null==o?a.create("text",e):a.create(e,o),r=this.split(t);this.parent.insertBefore(n,r)},t.prototype.insertInto=function(t,e){void 0===e&&(e=null),null!=this.parent&&this.parent.children.remove(this);var o=null;t.children.insertBefore(this,e),null!=e&&(o=e.domNode),this.domNode.parentNode==t.domNode&&this.domNode.nextSibling==o||t.domNode.insertBefore(this.domNode,o),this.parent=t,this.attach()},t.prototype.isolate=function(t,e){var o=this.split(t);return o.split(e),o},t.prototype.length=function(){return 1},t.prototype.offset=function(t){return void 0===t&&(t=this.parent),null==this.parent||this==t?0:this.parent.children.offset(this)+this.parent.offset(t)},t.prototype.optimize=function(t){null!=this.domNode[a.DATA_KEY]&&delete this.domNode[a.DATA_KEY].mutations},t.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},t.prototype.replace=function(t){null!=t.parent&&(t.parent.insertBefore(this,t.next),t.remove())},t.prototype.replaceWith=function(t,e){var o="string"==typeof t?a.create(t,e):t;return o.replace(this),o},t.prototype.split=function(t,e){return 0===t?this:this.next},t.prototype.update=function(t,e){},t.prototype.wrap=function(t,e){var o="string"==typeof t?a.create(t,e):t;return null!=this.parent&&this.parent.insertBefore(o,this.next),o.appendChild(this),o},t.blotName="abstract",t}();e.default=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(1),i=o(7),a=o(8),s=o(0),n=function(){function t(t){this.attributes={},this.domNode=t,this.build()}return t.prototype.attribute=function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])},t.prototype.build=function(){var o=this;this.attributes={};var t=r.default.keys(this.domNode),e=i.default.keys(this.domNode),n=a.default.keys(this.domNode);t.concat(e).concat(n).forEach(function(t){var e=s.query(t,s.Scope.ATTRIBUTE);e instanceof r.default&&(o.attributes[e.attrName]=e)})},t.prototype.copy=function(o){var n=this;Object.keys(this.attributes).forEach(function(t){var e=n.attributes[t].value(n.domNode);o.format(t,e)})},t.prototype.move=function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach(function(t){e.attributes[t].remove(e.domNode)}),this.attributes={}},t.prototype.values=function(){var o=this;return Object.keys(this.attributes).reduce(function(t,e){return t[e]=o.attributes[e].value(o.domNode),t},{})},t}();e.default=n},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});function i(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(function(t){return 0===t.indexOf(e+"-")})}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.keys=function(t){return(t.getAttribute("class")||"").split(/\s+/).map(function(t){return t.split("-").slice(0,-1).join("-")})},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(this.keyName+"-"+e),!0)},e.prototype.remove=function(e){i(e,this.keyName).forEach(function(t){e.classList.remove(t)}),0===e.classList.length&&e.removeAttribute("class")},e.prototype.value=function(t){var e=(i(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""},e}(o(1).default);e.default=a},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});function i(t){var e=t.split("-"),o=e.slice(1).map(function(t){return t[0].toUpperCase()+t.slice(1)}).join("");return e[0]+o}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.keys=function(t){return(t.getAttribute("style")||"").split(";").map(function(t){return t.split(":")[0].trim()})},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.style[i(this.keyName)]=e,!0)},e.prototype.remove=function(t){t.style[i(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")},e.prototype.value=function(t){var e=t.style[i(this.keyName)];return this.canAdd(t,e)?e:""},e}(o(1).default);e.default=a},function(t,e,o){t.exports=o(10)},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(2),r=o(3),i=o(4),a=o(12),s=o(13),u=o(14),c=o(15),l=o(16),p=o(1),f=o(7),h=o(8),d=o(6),y=o(0),m={Scope:y.Scope,create:y.create,find:y.find,query:y.query,register:y.register,Container:n.default,Format:r.default,Leaf:i.default,Embed:c.default,Scroll:a.default,Block:u.default,Inline:s.default,Text:l.default,Attributor:{Attribute:p.default,Class:f.default,Style:h.default,Store:d.default}};e.default=m},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.head=this.tail=null,this.length=0}return t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.insertBefore(t[0],null),1<t.length&&this.append.apply(this,t.slice(1))},t.prototype.contains=function(t){for(var e,o=this.iterator();e=o();)if(e===t)return!0;return!1},t.prototype.insertBefore=function(t,e){t&&(null!=(t.next=e)?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?((this.tail.next=t).prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)},t.prototype.offset=function(t){for(var e=0,o=this.head;null!=o;){if(o===t)return e;e+=o.length(),o=o.next}return-1},t.prototype.remove=function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)},t.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},t.prototype.find=function(t,e){void 0===e&&(e=!1);for(var o,n=this.iterator();o=n();){var r=o.length();if(t<r||e&&t===r&&(null==o.next||0!==o.next.length()))return[o,t];t-=r}return[null,0]},t.prototype.forEach=function(t){for(var e,o=this.iterator();e=o();)t(e)},t.prototype.forEachAt=function(t,e,o){if(!(e<=0))for(var n,r=this.find(t),i=r[0],a=t-r[1],s=this.iterator(i);(n=s())&&a<t+e;){var u=n.length();a<t?o(n,t-a,Math.min(e,a+u-t)):o(n,0,Math.min(u,t+e-a)),a+=u}},t.prototype.map=function(o){return this.reduce(function(t,e){return t.push(o(e)),t},[])},t.prototype.reduce=function(t,e){for(var o,n=this.iterator();o=n();)e=t(e,o);return e},t}();e.default=n},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var c=o(2),l=o(0),i={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},a=function(u){function t(t){var e=u.call(this,t)||this;return(e.scroll=e).observer=new MutationObserver(function(t){e.update(t)}),e.observer.observe(e.domNode,i),e.attach(),e}return r(t,u),t.prototype.detach=function(){u.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,e){this.update(),0===t&&e===this.length()?this.children.forEach(function(t){t.remove()}):u.prototype.deleteAt.call(this,t,e)},t.prototype.formatAt=function(t,e,o,n){this.update(),u.prototype.formatAt.call(this,t,e,o,n)},t.prototype.insertAt=function(t,e,o){this.update(),u.prototype.insertAt.call(this,t,e,o)},t.prototype.optimize=function(t,e){var o=this;void 0===t&&(t=[]),void 0===e&&(e={}),u.prototype.optimize.call(this,e);for(var n=[].slice.call(this.observer.takeRecords());0<n.length;)t.push(n.pop());for(var r=function(t,e){void 0===e&&(e=!0),null!=t&&t!==o&&null!=t.domNode.parentNode&&(null==t.domNode[l.DATA_KEY].mutations&&(t.domNode[l.DATA_KEY].mutations=[]),e&&r(t.parent))},i=function(t){null!=t.domNode[l.DATA_KEY]&&null!=t.domNode[l.DATA_KEY].mutations&&(t instanceof c.default&&t.children.forEach(i),t.optimize(e))},a=t,s=0;0<a.length;s+=1){if(100<=s)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach(function(t){var e=l.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(r(l.find(t.previousSibling,!1)),[].forEach.call(t.addedNodes,function(t){var e=l.find(t,!1);r(e,!1),e instanceof c.default&&e.children.forEach(function(t){r(t,!1)})})):"attributes"===t.type&&r(e.prev)),r(e))}),this.children.forEach(i),n=(a=[].slice.call(this.observer.takeRecords())).slice();0<n.length;)t.push(n.pop())}},t.prototype.update=function(t,e){var o=this;void 0===e&&(e={}),(t=t||this.observer.takeRecords()).map(function(t){var e=l.find(t.target,!0);return null==e?null:null==e.domNode[l.DATA_KEY].mutations?(e.domNode[l.DATA_KEY].mutations=[t],e):(e.domNode[l.DATA_KEY].mutations.push(t),null)}).forEach(function(t){null!=t&&t!==o&&null!=t.domNode[l.DATA_KEY]&&t.update(t.domNode[l.DATA_KEY].mutations||[],e)}),null!=this.domNode[l.DATA_KEY].mutations&&u.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,e),this.optimize(t,e)},t.blotName="scroll",t.defaultChild="block",t.scope=l.Scope.BLOCK_BLOT,t.tagName="DIV",t}(c.default);e.default=a},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var a=o(3),s=o(0);var r=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return i(n,r),n.formats=function(t){if(t.tagName!==n.tagName)return r.formats.call(this,t)},n.prototype.format=function(t,e){var o=this;t!==this.statics.blotName||e?r.prototype.format.call(this,t,e):(this.children.forEach(function(t){t instanceof a.default||(t=t.wrap(n.blotName,!0)),o.attributes.copy(t)}),this.unwrap())},n.prototype.formatAt=function(t,e,o,n){null!=this.formats()[o]||s.query(o,s.Scope.ATTRIBUTE)?this.isolate(t,e).format(o,n):r.prototype.formatAt.call(this,t,e,o,n)},n.prototype.optimize=function(t){r.prototype.optimize.call(this,t);var e=this.formats();if(0===Object.keys(e).length)return this.unwrap();var o=this.next;o instanceof n&&o.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var o in t)if(t[o]!==e[o])return!1;return!0}(e,o.formats())&&(o.moveChildren(this),o.remove())},n.blotName="inline",n.scope=s.Scope.INLINE_BLOT,n.tagName="SPAN",n}(a.default);e.default=r},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(3),a=o(0),s=function(i){function o(){return null!==i&&i.apply(this,arguments)||this}return r(o,i),o.formats=function(t){var e=a.query(o.blotName).tagName;if(t.tagName!==e)return i.formats.call(this,t)},o.prototype.format=function(t,e){null!=a.query(t,a.Scope.BLOCK)&&(t!==this.statics.blotName||e?i.prototype.format.call(this,t,e):this.replaceWith(o.blotName))},o.prototype.formatAt=function(t,e,o,n){null!=a.query(o,a.Scope.BLOCK)?this.format(o,n):i.prototype.formatAt.call(this,t,e,o,n)},o.prototype.insertAt=function(t,e,o){if(null==o||null!=a.query(e,a.Scope.INLINE))i.prototype.insertAt.call(this,t,e,o);else{var n=this.split(t),r=a.create(e,o);n.parent.insertBefore(r,n)}},o.prototype.update=function(t,e){navigator.userAgent.match(/Trident/)?this.build():i.prototype.update.call(this,t,e)},o.blotName="block",o.scope=a.Scope.BLOCK_BLOT,o.tagName="P",o}(i.default);e.default=s},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return i(t,r),t.formats=function(t){},t.prototype.format=function(t,e){r.prototype.formatAt.call(this,0,this.length(),t,e)},t.prototype.formatAt=function(t,e,o,n){0===t&&e===this.length()?this.format(o,n):r.prototype.formatAt.call(this,t,e,o,n)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(o(4).default);e.default=r},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(4),a=o(0),s=function(n){function e(t){var e=n.call(this,t)||this;return e.text=e.statics.value(e.domNode),e}return r(e,n),e.create=function(t){return document.createTextNode(t)},e.value=function(t){var e=t.data;return e.normalize&&(e=e.normalize()),e},e.prototype.deleteAt=function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)},e.prototype.index=function(t,e){return this.domNode===t?e:-1},e.prototype.insertAt=function(t,e,o){null==o?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):n.prototype.insertAt.call(this,t,e,o)},e.prototype.length=function(){return this.text.length},e.prototype.optimize=function(t){n.prototype.optimize.call(this,t),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},e.prototype.position=function(t,e){return void 0===e&&(e=!1),[this.domNode,t]},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var o=a.create(this.domNode.splitText(t));return this.parent.insertBefore(o,this.next),this.text=this.statics.value(this.domNode),o},e.prototype.update=function(t,e){var o=this;t.some(function(t){return"characterData"===t.type&&t.target===o.domNode})&&(this.text=this.statics.value(this.domNode))},e.prototype.value=function(){return this.text},e.blotName="text",e.scope=a.Scope.INLINE_BLOT,e}(i.default);e.default=s}])});
//# sourceMappingURL=/sm/3831176b5ea67c0401e7e5f0d604e5194d609cc23cdc0c5249094009b79b6e14.map